<?xml version="1.0"?>
<rdf:RDF
	xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
	xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
	xmlns:foaf="http://xmlns.com/foaf/0.1/"
	xmlns:rss="http://purl.org/rss/1.0/"
	xmlns:dc="http://purl.org/dc/elements/1.1/">
{getblog blogid=$smarty.request.blogid assign="blog"}
{getlinkcategories blogid=$blog.id assign="categories"}
{foreach from=$categories item=category}
	<foaf:Group>
		<foaf:name>{$category.title|escape}</foaf:name>
  {getlinks blogid=$blog.id categoryid=$category.id assign="links"}
  {foreach from=$links item=link}
		<foaf:member>
			<foaf:Agent>
				<foaf:name>{$link.title|escape}</foaf:name>
				<foaf:homepage>{$link.url}</foaf:homepage>
    {if $link.favicon|count_characters gt 0}
				<foaf:img>
					<foaf:Image rdf:about="{$link.favicon}">
						<dc:title>Favicon</dc:title> 
					</foaf:Image>
				</foaf:img>
    {/if}
    {if $link.feedurl|count_characters gt 0}
				<rdfs:seeAlso>
					<rss:channel rdf:about="{$link.feedurl}" />
				</rdfs:seeAlso>
    {/if}
			</foaf:Agent>
		</foaf:member>
  {/foreach}
	</foaf:Group>
{/foreach}
</rdf:RDF>
