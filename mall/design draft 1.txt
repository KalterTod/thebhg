Project: The Mall
Author: Jernai Teifsel <jernai@iinet.net.au>
Start Date: 2/10/2001
End Date: Buggered if I know

Idea: The Mall is the BHG's equivalent of the Corporate Division. The SSL,
      KIW, RGT, and whatever else we come up with are subdivisions of this
      overarching company.

      In reality, the Mall is nothing more than a database of subdivision
      objects designed to make keeping track of the crap a hunter owns easier.

      The Tactician is in charge of the Mall, and all the subdivisions as well.

Tables:
	subdivisions
		id : INT : auto_increment : primary key
		name : TEXT

	shiptypes
		id : INT : auto_increment : primary key
		subdivision : INT
		name : TEXT
		weight : INT
		
	ships
		id : INT : auto_increment : primary key
		subdivision : INT
		name : TEXT
		cost : INT
		type : INT
			- looked up in shiptypes
		length : INT
		crew : INT
			- this is subtly different to the old ships.crew, as
			  it actually the number of people that can inhabit
			  the base hull with the standard living quarters. no
			  distinction is made between crew, passengers and
			  prisoners (if you need a secure cell for prisoners,
			  you can always buy one as a part)
		manufacturer : INT
		designer : INT
			- along with manufacturer, looked up in companies
		hull : INT
			- this is, of course, hull strength in RUs
		mass : INT
			- mass in kilograms
		description : TEXT
		image : LONGBLOB
			- PNG or JPEG image of the ship. GIFs will be
			  rejected
		imagetype : ENUM("png", "jpeg")

	bays
		id : INT : auto_increment : primary key
		subdivision : INT
		name : TEXT
		exposed : TINYINT
			- true if exposed to the outside, false otherwise
		volume : INT
			- measured in cubic metres

	shipbays
		id : INT : auto_increment : primary key
		subdivision : INT
		shipid : INT
		type : INT
			- looked up in bays. whether the bay is exposed to
			  the outside world of not is defined in bays, not
			  here

	parttypes
		id : INT : auto_increment : primary key
		subdivision : INT
		name : TEXT
		weight : INT

	partclasses
		id : INT : auto_increment : primary key
		subdivision : INT
		type : INT
			- looked up in parttypes
		name : TEXT
		weight : INT
	
	parts (formerly mods)
		id : INT : auto_increment : primary key
		subdivision : INT
		name : TEXT
		cost : INT
		mass : INT
		volume : INT
			- the volume the part takes up, in cubic metres
		type : INT
			- looked up in parttypes
		experimental : TINYINT
		class : INT
			- think "subtype". defined on a per-type basis in
			  partclasses
		power : INT
		maximum : INT
			- maximum number of this part allowed per ship
		needsexposure : TINYINT
			- true if the part needs a bay with an outside
			  exposure, false otherwise
		description : TEXT
		image : LONGBLOB
		imagetype : ENUM("png", "jpeg")

	parteffects
		id : INT : auto_increment : primary key
		subdivision : INT
		part : INT
			- looked up in parts
		value : INT
			- no idea how to describe this, frankly
		type : INT
			- looked up in effecttypes. defines what type of
			  effect this is (shields, whatever)
	
	shiporders
		id : INT : auto_increment : primary key
		subdivision : INT
		shiptype : INT
			- looked up in ships
		owner : INT
			- from the roster
		buyer : INT
			- used for ships given as gifts only. set to 0 for
			  non-gift ships, matches a roster ID. i dislike this
			  greatly, as it complicates other stuff
		name : TEXT
		comments : TEXT
			- comments from the owner

	partorders
		id : INT : auto_increment : primary key
		subdivision : INT
		parttype : INT
			- looked up in parts
		ship : INT
			- looked up in shipprders
		bay : INT
			- looked up in shipbays. defines the bay this part is
			  living in
	
	companies
		id : INT : auto_increment : primary key
		name : TEXT
		logo : LONGBLOB
			- the company's corporate logo, if it has one
		imagetype : ENUM("png", "jpeg")

	shoppingcartships
		id : INT : auto_increment : primary key
		subdivision : INT
		sessionid : TEXT
		shiptype : INT
			- looked up in ships
		name : TEXT
	
	shoppingcartparts
		id : INT : auto_increment : primary key
		subdivision : INT
		sessionid : TEXT
		parttype : INT
			- looked up in parts
		shipid : INT
			- looked up in shiporders
		bay : INT
			- looked up in shipbays
		quantity : INT
	
	auctions
		id : INT : auto_increment : primary key
		subdivision : INT
		start : INT
			- start time of auction
		duration : INT
			- duration of the auction in hours
		description : TEXT
			- the little blurb people put on their ships when
			  they're getting auctioned (the ships, that is)
	
	bids
		id : INT : auto_increment : primary key
		subdivision : INT
		shipid : INT
			- looked up in shiporders
		bidder : INT
			- roster ID
		amount : INT
		time : INT
	
Object List:
	Mall Object
		- overarching object defining subdivisions. pretty much every-
		  thing else will require a subdivision ID, and this is the
		  place to get it
	
	Subdivision Object
		- a subdivision
	
	ShipType Object
	
	Ship Object
		- wraps around the ships table
	
	Bay Object
		- contains bay information
	
	Part Object
		- containts part information

	PartType Object

	PartClass Object
	
	ShipOrder Object
		- details on a ship order
	
	PartOrder Object
		- wraps around a record from partorders
	
	Company Object
		- a company (duh)
	
	ShoppingCart Object
		- a shopping cart

	CartShip Object
		- a ship in a cart
	
	CartPart Object
		- a part in a cart with some SPART! muah aha aha... what?

	Auction Object
		- an auction
	
	Bid Object
		- a bid on an auction

Object Definitions:
	Mall Object
		GetSubdivisions()
			- returns an array of Subdivision objects
		GetCompanies()
		AddCompany($name)
		AddSubdivision($name)

	Subdivision Object
		Subdivision($id)
		GetName()
		GetShipTypes()
		GetPartTypes()
		GetAuctions()
		GetOrders($person)
		SetName($name)
		Delete()
	
	ShipType Object
		ShipType($id)
		GetID()
		GetName()
		GetWeight()
		GetShips()
		IncreaseWeight()
		DecreaseWeight()
		SetName()
		AddShip($name, $cost, $type, $length, $crew, $manufacturer, $designer, $hull, $mass, $description, $image, $imagetype)
		Delete()
	
	Ship Object
		Ship($id)
		GetID()
		GetName()
		GetCost()
		GetType()
			- returns a ShipType object
		GetLength()
		GetCrew()
		GetManufacturer()
		GetDesigner()
			- the last two functions return a Company object
		GetHull()
		GetMass()
		GetDescription()
		GetImage()
			- returns the image itself
		GetImageType()
		GetBays()
		GetOrders()
			- returns all the orders this ship has received, as an
			  array
		SetID()
			- note that where Set functions don't have parameters
			  listed, they take one parameter corresponding to the
			  field name in the function name. if this field can be
			  an object or an ID, either will be accepted
		SetName()
		SetCost()
		SetType()
		SetLength()
		SetCrew()
		SetManufacturer()
		SetDesigner()
		SetHull()
		SetMass()
		SetDescription()
		SetImage($image, $type)
			- must be a binary image
		BuyShip($owner, $name)
		GiveShip($owner, $buyer, $name)
		Delete()
	
	Bay Object
		Bay($id)
		GetID()
		GetName()
		IsExposed()
		GetVolume()
		SetName()
		SetExposure()
		SetVolume()
		Delete()
	
	PartType Object
		PartType($id)
		GetID()
		GetName()
		GetWeight()
		GetParts()
		GetClasses()
		IncreaseWeight()
		DecreaseWeight()
		SetName()
		Delete()

	PartClass Object
		PartClass($id)
		GetID()
		GetType()
		GetName()
		GetWeight()
		GetParts()
		IncreaseWeight()
		DecreaseWeight()
		SetType()
		Delete()
	
	Part Object
		Part($id)
		GetID()
		GetName()
		GetCost()
		GetMass()
		GetVolume()
		GetType()
		GetClass()
		IsExperimental()
		GetPower()
		GetMaximum()
		NeedsExposure()
		GetDescription()
		GetImage()
		GetImageType()
		GetNumberSold()
		SetName()
		SetCost()
		SetMass()
		SetVolume()
		SetType()
		SetClass()
		SetExperimental()
		SetPower()
		SetMaximum()
		SetExposure()
		SetDescription()
		SetImage($image, $type)
		Delete()
	
	ShipOrder Object
		ShipOrder($id)
		GetID()
		GetType()
		GetOwner()
		GetBuyer()
		IsGift()
		GetName()
		GetComments()
		GetParts()
		SetType()
		SetName()
		SetComments()
		Auction($duration, $description)
		AddPart($part, $bay)
		Delete()
		
	PartOrder Object
		PartOrder($id)
		GetID()
		GetType()
		GetShip()
		GetBay()
		SetBay()
		Delete()
	
	Company Object
		Company($id)
		GetID()
		GetName()
		GetLogo()
		GetImageType()
		GetDesigns()
		GetShips()
		SetName()
		SetLogo($image, $type)
		Delete()
	
	ShoppingCart Object
		ShoppingCart($sessionid)
		GetID()
		GetSubdivision()
		GetSessionID()
		GetShips()
		GetParts()
		BuyContents($owner)
		Delete()
	
	CartShip Object
		CartShip($id)
			- never called directly
		GetID()
		GetSubdivision()
		GetSessionID()
		GetShipType()
		GetName()
		SetShipType()
		SetName()
		BuyShip($owner)
		Delete()

	CartPart Object
		CartPart($id)
		GetID()
		GetSubdivision()
		GetPartType()
		GetShip()
		GetBay()
		GetQuantity()
		SetPartType()
		SetShip()
		SetBay()
		SetQuantity()
		BuyPart()
		Delete()

	Auction Object
		Auction($id)
		GetID()
		GetStartTime()
		GetDuration()
		GetDescription()
		GetBids()
		IsClosed()
		IsUnlimited()
			- in time
		SetDuration()
		SetDescription()
		AcceptBid($bid)
		MakeBid($person, $amount)
		Delete()
	
	Bid Object
		Bid($id)
		GetID()
		GetShip()
		GetBidder()
		GetAmount()
		GetTime()
		Accept()
		Delete()
